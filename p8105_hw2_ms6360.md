p8105_hw2_ms6360
================
Maisie Sun
2022-10-01

# Problem 1

``` r
NYC_transit = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  select(line, station_name, station_latitude, starts_with('route'), entry, vending, entrance_type, ada) %>% 
  mutate(entry = ifelse(entry == "YES",TRUE,FALSE))
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
NYC_transit
```

    ## # A tibble: 1,868 × 18
    ##    line  stati…¹ stati…² route1 route2 route3 route4 route5 route6 route7 route8
    ##    <chr> <chr>     <dbl> <chr>  <chr>  <chr>  <chr>  <chr>  <chr>  <chr>   <dbl>
    ##  1 4 Av… 25th St    40.7 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  2 4 Av… 25th St    40.7 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  3 4 Av… 36th St    40.7 N      R      <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  4 4 Av… 36th St    40.7 N      R      <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  5 4 Av… 36th St    40.7 N      R      <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  6 4 Av… 45th St    40.6 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  7 4 Av… 45th St    40.6 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  8 4 Av… 45th St    40.6 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  9 4 Av… 45th St    40.6 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ## 10 4 Av… 53rd St    40.6 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ## # … with 1,858 more rows, 7 more variables: route9 <dbl>, route10 <dbl>,
    ## #   route11 <dbl>, entry <lgl>, vending <chr>, entrance_type <chr>, ada <lgl>,
    ## #   and abbreviated variable names ¹​station_name, ²​station_latitude

-   The dataset contains variables station names, station latitude,
    different routes (1 to 11), entry, vending, entrance times and ADA.

-   There are 18 columns (variables) and 1868 rows (observations).

-   The data is not tidy and can be improved by having routes as cell
    number under a variable called “Routes” instead of having different
    routes as its own variables.

Answer the following questions using these data:

How many distinct stations are there? Note that stations are identified
both by name and by line (e.g. 125th St 8th Avenue; 125st Broadway;
125st Lenox); the `distinct` function may be useful here.

``` r
NYC_transit %>%
  select(line, station_name) %>%
  distinct
```

    ## # A tibble: 465 × 2
    ##    line     station_name            
    ##    <chr>    <chr>                   
    ##  1 4 Avenue 25th St                 
    ##  2 4 Avenue 36th St                 
    ##  3 4 Avenue 45th St                 
    ##  4 4 Avenue 53rd St                 
    ##  5 4 Avenue 59th St                 
    ##  6 4 Avenue 77th St                 
    ##  7 4 Avenue 86th St                 
    ##  8 4 Avenue 95th St                 
    ##  9 4 Avenue 9th St                  
    ## 10 4 Avenue Atlantic Av-Barclays Ctr
    ## # … with 455 more rows

-   There are 465 distinct stations.

How many stations are ADA compliant?

``` r
NYC_transit %>%
  filter(ada == TRUE) %>%
  select(line, station_name) %>%
  distinct
```

    ## # A tibble: 84 × 2
    ##    line            station_name                  
    ##    <chr>           <chr>                         
    ##  1 4 Avenue        Atlantic Av-Barclays Ctr      
    ##  2 4 Avenue        DeKalb Av                     
    ##  3 4 Avenue        Pacific St                    
    ##  4 42nd St Shuttle Grand Central                 
    ##  5 6 Avenue        34th St                       
    ##  6 6 Avenue        47-50th Sts Rockefeller Center
    ##  7 6 Avenue        Church Av                     
    ##  8 63rd Street     21st St                       
    ##  9 63rd Street     Lexington Av                  
    ## 10 63rd Street     Roosevelt Island              
    ## # … with 74 more rows

-   There are 84 stations that are ADA compliant.

What proportion of station entrances / exits without vending allow
entrance?

``` r
NYC_transit %>%
  filter(vending == "NO") %>%
  pull(entry) %>%
  mean
```

    ## [1] 0.3770492

-   0.377 of station entrances without vending allow entrance.

Reformat data so that route number and route name are distinct
variables. How many distinct stations serve the A train? Of the stations
that serve the A train, how many are ADA compliant?

``` r
NYC_transit
```

    ## # A tibble: 1,868 × 18
    ##    line  stati…¹ stati…² route1 route2 route3 route4 route5 route6 route7 route8
    ##    <chr> <chr>     <dbl> <chr>  <chr>  <chr>  <chr>  <chr>  <chr>  <chr>   <dbl>
    ##  1 4 Av… 25th St    40.7 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  2 4 Av… 25th St    40.7 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  3 4 Av… 36th St    40.7 N      R      <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  4 4 Av… 36th St    40.7 N      R      <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  5 4 Av… 36th St    40.7 N      R      <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  6 4 Av… 45th St    40.6 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  7 4 Av… 45th St    40.6 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  8 4 Av… 45th St    40.6 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ##  9 4 Av… 45th St    40.6 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ## 10 4 Av… 53rd St    40.6 R      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>       NA
    ## # … with 1,858 more rows, 7 more variables: route9 <dbl>, route10 <dbl>,
    ## #   route11 <dbl>, entry <lgl>, vending <chr>, entrance_type <chr>, ada <lgl>,
    ## #   and abbreviated variable names ¹​station_name, ²​station_latitude

``` r
# specify the columns I want to change
NYC_transit$route8 <- as.character(NYC_transit$route8)  
NYC_transit$route9 <- as.character(NYC_transit$route9)  
NYC_transit$route10 <- as.character(NYC_transit$route10)  
NYC_transit$route11 <- as.character(NYC_transit$route11)  

NYC_transit %>%
  pivot_longer(
    route1:route11,
    names_to = "route_num",
    values_to = "route") %>%
  filter(route == "A") %>%
  select(line, station_name) %>%
  distinct
```

    ## # A tibble: 60 × 2
    ##    line            station_name                 
    ##    <chr>           <chr>                        
    ##  1 42nd St Shuttle Times Square                 
    ##  2 8 Avenue        125th St                     
    ##  3 8 Avenue        145th St                     
    ##  4 8 Avenue        14th St                      
    ##  5 8 Avenue        168th St - Washington Heights
    ##  6 8 Avenue        175th St                     
    ##  7 8 Avenue        181st St                     
    ##  8 8 Avenue        190th St                     
    ##  9 8 Avenue        34th St                      
    ## 10 8 Avenue        42nd St                      
    ## # … with 50 more rows

``` r
NYC_transit %>%
  pivot_longer(
    route1:route11,
    names_to = "route_num",
    values_to = "route") %>%
  filter(route == "A", ada == "TRUE") %>%
  select(line, station_name) %>%
  distinct
```

    ## # A tibble: 17 × 2
    ##    line             station_name                 
    ##    <chr>            <chr>                        
    ##  1 8 Avenue         14th St                      
    ##  2 8 Avenue         168th St - Washington Heights
    ##  3 8 Avenue         175th St                     
    ##  4 8 Avenue         34th St                      
    ##  5 8 Avenue         42nd St                      
    ##  6 8 Avenue         59th St                      
    ##  7 8 Avenue         Inwood - 207th St            
    ##  8 8 Avenue         West 4th St                  
    ##  9 8 Avenue         World Trade Center           
    ## 10 Broadway         Times Square-42nd St         
    ## 11 Broadway-7th Ave 59th St-Columbus Circle      
    ## 12 Broadway-7th Ave Times Square                 
    ## 13 Canarsie         8th Av                       
    ## 14 Franklin         Franklin Av                  
    ## 15 Fulton           Euclid Av                    
    ## 16 Fulton           Franklin Av                  
    ## 17 Rockaway         Howard Beach

-   There are 60 distinct stations on line A and 17 of them are ADA
    compliant.

# Problem 2

``` r
#import Mr. Trash Wheel
trash_wheel = 
  read_excel("data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx",
  sheet = "Mr. Trash Wheel",
  range = "A2:N535",
  skip = 1) %>%
janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(sports_balls = as.integer(round(sports_balls, 0)))
  trash_wheel$name <- "Mr.Trash Wheel"

#import Professor Trash Wheel
prof_trash_wheel = 
  read_excel("data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx",
  sheet = "Professor Trash Wheel",
  range = "A2:N117",
  skip = 1) %>%
janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(sports_balls = as.integer(round(sports_balls, 0))) %>%
  add_column(name = "Professor Trash Wheel") %>%
  mutate(dumpster = as.character(dumpster))
  
#fully join datasets
joint_trash_wheel = 
  full_join(trash_wheel, prof_trash_wheel)
```

    ## Joining, by = c("dumpster", "month", "year", "date", "weight_tons",
    ## "volume_cubic_yards", "plastic_bottles", "polystyrene", "cigarette_butts",
    ## "glass_bottles", "grocery_bags", "chip_bags", "sports_balls", "homes_powered",
    ## "name")

``` r
joint_trash_wheel
```

    ## # A tibble: 525 × 15
    ##    dumpster month  year date                weight_tons volume…¹ plast…² polys…³
    ##    <chr>    <chr> <dbl> <dttm>                    <dbl>    <dbl>   <dbl>   <dbl>
    ##  1 1        May    2014 2014-05-16 00:00:00        4.31       18    1450    1820
    ##  2 2        May    2014 2014-05-16 00:00:00        2.74       13    1120    1030
    ##  3 3        May    2014 2014-05-16 00:00:00        3.45       15    2450    3100
    ##  4 4        May    2014 2014-05-17 00:00:00        3.1        15    2380    2730
    ##  5 5        May    2014 2014-05-17 00:00:00        4.06       18     980     870
    ##  6 6        May    2014 2014-05-20 00:00:00        2.71       13    1430    2140
    ##  7 7        May    2014 2014-05-21 00:00:00        1.91        8     910    1090
    ##  8 8        May    2014 2014-05-28 00:00:00        3.7        16    3580    4310
    ##  9 9        June   2014 2014-06-05 00:00:00        2.52       14    2400    2790
    ## 10 10       June   2014 2014-06-11 00:00:00        3.76       18    1340    1730
    ## # … with 515 more rows, 7 more variables: cigarette_butts <dbl>,
    ## #   glass_bottles <dbl>, grocery_bags <dbl>, chip_bags <dbl>,
    ## #   sports_balls <int>, homes_powered <dbl>, name <chr>, and abbreviated
    ## #   variable names ¹​volume_cubic_yards, ²​plastic_bottles, ³​polystyrene

Write a paragraph about these data; you are encouraged to use inline R.
Be sure to note the number of observations in the resulting dataset, and
give examples of key variables. For available data, what was the total
weight of trash collected by Professor Trash Wheel? What was the total
number of sports balls collected by Mr. Trash Wheel in 2020?

For Mr. Trash Wheel dataset, there are 15 columns (variables) and 454
rows (observations). As for Professor Trash Wheel, there are 15 columns
(variables) and 71 rows (observations). Once combined, there are 15
columns (variables) and 525 rows (observations). Key variables include
dumpster, month, year, date, weight_tons, volume_cubic_yards,
plastic_bottles, polystyrene, cigarette_butts, glass_bottles,
grocery_bags, chip_bags, sports_balls, homes_powered, name

weight of trash collected in tons, number of trash collected (plastic
bottles, polystyrene, cigarette butts, grocery bags, glass bottles, chip
bags, and sports balls).

The total weight of trash collected by Professor Trash Wheel is 135.5.
